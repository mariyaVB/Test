{% extends "base.html" %}
{% load static %}
{% block head_title %}
    <link rel="stylesheet" href="{% static 'css/main_style.css' %}" />
    <title>{{ title }}</title>
{% endblock head_title %}

{% block base_content %}
    <div class="find_file">
        <h1>–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞</h1>
        <form method="get">
            <input class="inp_key" type="text" name="public_key" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á" required>
            <button class="start" type="submit">–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∞–π–ª—ã</button>
        </form>

        {% if files and public_key or download_link %}
            <div>
                <h2>–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏ –ø–∞–ø–æ–∫:</h2>
                <ul class="file_list">
                    {% for file in files %}
                        <li data-mime-type="{{ file.mime_type | default:'unknown' }}">
                            {% if file.type == 'dir' %}
                                üìÇ {{ file.name }}
                            {% elif file.type == 'file' %}
                                üìÑ {{ file.name }}
                                <a href="{{ file.file }}" target="_blank">–°–∫–∞—á–∞—Ç—å</a>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
    <form method="get" action="{% url 'download' %}">
        <input type="hidden" name="download" value="{{ public_key }}">
        <button class="start" type="submit">–°–∫–∞—á–∞—Ç—å –≤—Å–µ</button>
    </form>

    <div>
        {% if download_link %}
            <a href="{{ download_link }}" type="hidden"><button class="start">–°—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è</button></a>
        {% endif %}
    </div>
        {% elif public_key %}
            <p>–§–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.</p>
        {% endif %}
    </div>



{% endblock base_content %}